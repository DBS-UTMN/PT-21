# Модуль 3

## Задания
###### Создание индексов на таблицах в БД
- B-tree индекс 
- Функциональный индекс
- Реверсивный индекс

###### Чтение и интерпретация план выполнения запроса
- Вложить в отчет ЛР планы выполнения запроса до создания индекса и после. Можно выбрать любую таблицу и любой тип индекса, важно чтобы запрос был одинаковым, но планы разные.
- Дать пояснение, что изменилось в выполнении запроса.

###### Сбор статистики и поддержание индексов в актуальном состоянии
- Найти статистику по любому индексу, затем внести серьезные изменения в таблицы с индексами (добавить записи, удалить записи, обновить) и посмотреть как изменилась статистика. Оба среза статистики занести в отчет по ЛР.
 `Для функциональных индексов статистика собирается принудительно`
`Для просмотра статистики нужно:`
- `Установить расширение pagestats: CREATE EXTENSION pgstattuple`;
- `Использовать pgstatindex('ИМЯ_ИНДЕКСА')`
- `Использовать pgstattuple('ИМЯ_ТАБЛИЦЫ')`
- `Сделать выводы по полученым результатм выполнения функции`

###### Полнотекстовой поиск и материализованные представления
- Загрузить слабоструктурированные данные (сообщения из диспетчерского управления супервайзинга) из ахрива `messages.csv` в таблицу (в поле message) со следующей структурой 
```sql
CREATE TABLE disp_messages (
m_id char(11),
message text
)
```
- Добавить вычесляемое поле с типом tsvector для использования функционала полнотекстового поиска
- Создаить GIN индекс для вычесляемого поля
- Создать материализованное представление, которое при сборке вычесляет к какому судну можно отнести сообщение и даты действия разрешений для судна.

###### Data Object View (DOV)
- Создать представления использующие триггеры типа `INSTEAD OF` для вставки данных в несколько зависимых таблиц
